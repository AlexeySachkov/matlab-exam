# Работа с файлами
## Функции save и load
- В самом простом случае для сохранения и последующей загрузки каких-либо данных в MatLab предусмотрены две функции.

```matlab
save <имя файла> <имена переменных>  % сохранение данных 
load <имя файла> <имена переменных>       % загрузка данных
```

- Функция save позволяет сохранять произвольные переменные программы в файл, который будет и иметь расширение mat. 
- Функция load позволяет загрузить из указанного mat-файла ранее сохраненные переменные.

```matlab
function save_load 
x = ones(5); 
y = 5; 
s = 'hello'; 
  
save params x y s; 
x = zeros(5); 
y = 0; 
s = ''; 
  
load params x y s; 
disp(x); 
disp(y); 
disp(s);
```

- В данной программе сначала выполняется инициализация переменных x, y, s. 
- Затем, они сохраняются в файл params.mat, заменяются другими значениями и после загрузки отображаются на экране. 
- При выполнении этой программы на экране будут показаны те же значения переменных, которые они принимали в самом начале.

## Функции fwrite и fread
Функции save и load работают только с .mat файлами и это является их недостатком. Поэтому были разработаны функции fwrite, fread.

```matlab
fwrite(<идентификатор файла>, <переменная>, <тип данных>);

<переменная>=fread(<идентификатор файла>); 
<переменная>=fread(<идентификатор файла>, <размер>); 
<переменная>=fread(<идентификатор файла>, <размер>, <точность>); 
% идентификатор файла это указатель на файл, с которым предпологается работа.
```
Что бы получить индетификатор файл используется функция fopen. 
```matlab
<идентификатор файла> = fopen(<имя файла>,<режим работы>);
```
Режимы работы с файлами. Приведены ниже в таблице

Параметр  | Описание
------------- | -------------
'r'  | Чтение
'w'  | Запись (стирает предыдущее содержимое файла)
'a'  | Добавление (создает файл если его нет)
'b'  | Дополнительный параметр, означающий работу с бинарными файлами, например

Пример работы с бинарным файлом

```matlab
A = [1 2 3 4 5]; 
  
fid = fopen('my_file.dat', 'wb');     % открытие файла на запись 
if fid == -1                     % проверка корректности открытия 
    error('File is not opened'); 
end 
  
fwrite(fid, A, 'double');   % запись матрицы в файл (40 байт) 
fclose(fid);                % закрытие файла 
  
fid = fopen('my_file.dat', 'rb');     % открытие файла на чтение 
if fid == -1                     % проверка корректности открытия 
    error('File is not opened'); 
end 
  
B = fread(fid, 5, 'double');     % чтение 5 значений double 
disp(B);                         % отображение на экране 
fclose(fid);                     % закрытие файла
```



