#Повышение эффективности обработки М-файлов
MATLAB - это язык, специально разработанный для обработки массивов и выполнения матричных операций. 
Всюду, где это возможно, пользователь должен учитывать это обстоятельство.

**Векторизация циклов.**

Под векторизацией понимается преобразование циклов for и while к эквивалентным векторным или матричным выражениям. При векторизации алгоритма ускоряется выполнение M-файла.

Пример

Вот один из способов вычислить 1001 значение функции синуса на интервале [0 10], используя оператор цикла:

```             
                i = 0;

                for t = 0:.01:10
                
                        i = i + 1;
                        
                    y(i) = sin(t);
                    
                end
```  
                
Эквивалентная векторизованная форма имеет вид
             
 ```            
                t = 0:.01:10;
                
                y = sin(t);
``` 
                
В этом случае вычисления выполняются намного быстрее, и такой подход в системе MATLAB является предпочтительным. 
Время выполнения этих М-файлов можно оценить, используя команды tic и toc.

Пример

Функция repmat - формирование массива из частей - использует преимущество векторизации. 

Она имеет три входных аргумента: массив A, количество строк М и столбцов N для вновь создаваемого массива.

Функция repmat возвращает массив B , который использует массив A в качестве основы для построения блочной матрицы с количеством блоков MxN:

```    
                A = [1 2 3; 4 5 6];
                B = repmat(A, 2, 3);
                B =
                     1 	2 	3 	1 	2 	3 	1 	2 	3
                     4 	5 	6 	4 	5 	6 	4 	5 	6
                     1 	2 	3 	1 	2 	3 	1 	2 	3
                     4 	5 	6 	4 	5 	6 	4 	5 	6

```

**Предварительное выделение памяти.**

В системе MATLAB есть возможность для существенного сокращения времени выполнения программы за счёт предварительного размещения массивов для выходных данных. Предварительное распределение избавляет от необходимости изменять массив при увеличении его размеров. 

Используйте соответствующие функции предварительного выделения памяти, как это показано в таблице для различных типов массивов

Тип массива|Функция|Примеры
-------- | ------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Массив чисел|zeros|y = zeros(1, 100)
      for i = 1:100
      y(i) = det(X^i);
        end
        \|
        |Массив записей|struct|data = struct([1 3], 'x', [1 3], 'y', [5 6])
                       data(3).x = [9 0 2];
                      data(3).y = [5 6 7];
Массив ячеек 	cell 	B = cell(2, 3)
B{1, 3} = 1:3;
B{2, 2} = 'string';

Предварительное выделение памяти позволяет избежать фрагментации памяти при работе с большими матрицами. 

В ходе сеанса работы системы MATLAB, память может стать фрагментированной из-за работы механизмов динамического распределения и освобождения памяти. Это может привести к появлению большого количества фрагментов свободной памяти, и непрерывного пространства памяти может оказаться недостаточно для хранения какого-либо большого массива.

Предварительное выделение памяти позволяет определить непрерывную область, достаточную для проведения всех вычислений.
