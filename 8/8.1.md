#Повышение эффективности обработки М-файлов
MATLAB - это язык, специально разработанный для обработки массивов и выполнения матричных операций. 
Всюду, где это возможно, пользователь должен учитывать это обстоятельство.

**Векторизация циклов.**

Под векторизацией понимается преобразование циклов for и while к эквивалентным векторным или матричным выражениям. При векторизации алгоритма ускоряется выполнение M-файла.

Пример

Вот один из способов вычислить 1001 значение функции синуса на интервале [0 10], используя оператор цикла:

```             
                i = 0;

                for t = 0:.01:10
                
                        i = i + 1;
                        
                    y(i) = sin(t);
                    
                end
```  
                
Эквивалентная векторизованная форма имеет вид
             
 ```            
                t = 0:.01:10;
                
                y = sin(t);
``` 
                
В этом случае вычисления выполняются намного быстрее, и такой подход в системе MATLAB является предпочтительным. 
Время выполнения этих М-файлов можно оценить, используя команды ```tic``` и ```toc```.

Пример

Функция repmat - формирование массива из частей - использует преимущество векторизации. 

Она имеет три входных аргумента: массив A, количество строк М и столбцов N для вновь создаваемого массива.

Функция repmat возвращает массив B , который использует массив A в качестве основы для построения блочной матрицы с количеством блоков MxN:

```    
                A = [1 2 3; 4 5 6];
                B = repmat(A, 2, 3);
                B =
                     1 	2 	3 	1 	2 	3 	1 	2 	3
                     4 	5 	6 	4 	5 	6 	4 	5 	6
                     1 	2 	3 	1 	2 	3 	1 	2 	3
                     4 	5 	6 	4 	5 	6 	4 	5 	6

```

**Предварительное выделение памяти.**

В системе MATLAB есть возможность для существенного сокращения времени выполнения программы за счёт предварительного размещения массивов для выходных данных. Предварительное распределение избавляет от необходимости изменять массив при увеличении его размеров. 

Используйте соответствующие функции предварительного выделения памяти, как это показано в таблице для различных типов массивов

Тип массива|Функция|
-------- | ------------|
Массив чисел|zeros|
Массив записей|struct|
Массив ячеек |cell|

Примеры

```
y = zeros(1, 100)
for i = 1:100
  y(i) = det(X^i);
end
```
```
data = struct([1 3], 'x', [1 3], 'y', [5 6])
data(3).x = [9 0 2];
data(3).y = [5 6 7];
```
```
B = cell(2, 3)
B{1, 3} = 1:3;
B{2, 2} = 'string';
```

Предварительное выделение памяти позволяет избежать фрагментации памяти при работе с большими матрицами. 

В ходе сеанса работы системы MATLAB, память может стать фрагментированной из-за работы механизмов динамического распределения и освобождения памяти. Это может привести к появлению большого количества фрагментов свободной памяти, и непрерывного пространства памяти может оказаться недостаточно для хранения какого-либо большого массива.

Предварительное выделение памяти позволяет определить непрерывную область, достаточную для проведения всех вычислений.

**Команды управления памятью**

    clear список_переменных - удаление переменных из рабочей области;
    
    pack - запись текущих переменных на диск и последующей их загрузкой;
    
    функция quit - по мере необходимости выход системы MATLAB с освобождением всей памяти;
    
    save filename - сохранение переменных в файле.
    
    load filename - считывание переменных из файла в рабочую область
    
    save filename -ascii varname - сохранение переменной в текстовый файл
    
    load filename -ascii - считывание переменной из текстового файла в рабочую область
    
    who - список имен переменных рабочей области
    
    whos - список переменных рабочей области с их параметрами

Замечание

Команды save и load работают быстрее, чем утилиты ввода-вывода системы МАТLАВ. Эти команды оптимизированы как по скорости выполнения, так и по возможности фрагментации памяти.

**Переменные и память.** Память выделяется для переменной всякий раз, когда эта переменная не существует.

Для экономии памяти надо:

1.избегать использовать одни и те же переменные в качестве входных и выходных аргументов функции, 

2.поскольку они будут передаватся ссылкой;

3.после использования переменной целесообразно либо присвоить ей пустой массив, либо удалить с помощью команды clear имя переменной;

4.стремиться использовать переменные повторно.

**Глобальные переменные.** При объявлении глобальной переменной в таблицу переменных просто помещается флаг. При этом не требуется дополнительной памяти.

Например, последовательность операторов ```a = 5; global a```

определяет переменную a как глобальную и формируется дополнительная копия этой переменной.

Функция ```clear a``` удаляет переменную а из рабочей области системы MATLAB, но сохраняет её в области глобальных переменных.

Функция ```clear global a``` удаляет переменную а из области глобальных переменных.

#Средства отладки

```cd directoryname``` - смена текущей папки

```dir``` - вывод в командном окне файлов, находящихся в текущей папке

```diary filename``` - создание дневника(все что будет выводиться в командное окно после команды сохранится в файл)

```diary off``` - отключение режима дневника

```help func``` - информация о функции будет выведена в командное окно

```doc func``` - информация о функции будет выведена в отдельном окне

