#Структура программ на языке MATLAB

**Программа на языке MatLab** - последовательность команд, записанная в файл с расширением .m.
Программы бывают двух видов:

###Программы-сценарии

Могут использовать не только создаваемые ей самой переменные, но и использовать все переменные в рабочем пространстве командного окна. Созданные переменные также располагаются в рабочем пространстве командного окна.
Остановить выполнение скрипта можно точкой останова(F12) или программно, поставив в соответствубщем месте оператор *keyboard*. Эта команда передает управление в командное окно, в котором можно посмотреть значения переменных и изменить их. Вернуться к выполнению скрипта можно командой *return*.

###Программы-функции

Первая (после коментария) строка должна иметь вид:

*function [y1,y2,y3,y4] = ff(x1,x2,x3)*

  * [y1,y2,y3,y4] - возвращаемое значение;
  * ff - имя функции;
  * (x1,x2,x3) - список входных параметров
  
Перед этой строкой может стоять любое количество строк комментария, начинающихся *%*. Они будут выводится в качестве справки по функции ff в ответ на команду *help ff*.

Если комментария перед функцией нет, то в его качестве будет выводится следующая строка после этой. Если же после *function ...* идет команда, то MatLab будет считать, что они отсутствуют.

Если возвращаемый параметр 1, квадратные скобки можно опускать. Если нет входных параметров - круглые скобки также не обязательны.

Формальные параметры - параметры, указываемые в файле функции при описании.
Фактические параметры - параметры, указываемые при вызове функции.

Входные и выходные формальные параметры используются внутри функции как локальные переменные. Внутри функции можно использовать и другие переменные.

При вызове функции входные фактические параметры копируются по порядку в соответствующие формальные параметры.

Выполнение функции заканчивается после выполнения её последней команды. Команда return может использоваться в любом месте для досрочного выхода из функции.

После завершения работы функции все её локальные переменные удаляются. Глобальные переменные можно объявить с помощью слова *global*.
Эта команда должна появится во всех функциях, которые хотят использовать одни и те же переменные, упомянутые в списке global. Использовать глобальные переменные не рекомендуется.

При завершении функции значения формальных выходных параметров копируются по порядку в фактические.

Количество фактических параметров должно быть не больше количества формальных, но может быть меньше. Удобно, если часть параметров задается по умолчанию.

Количество фактических входных и выходных параметров можно определить используя функции *nargin* и *nargout* соответственно.

 **Функции с переменным количеством входных и выходных параметров**
 
 function [y1, varargout] ff (x1, x2, varargin)
 
 varargin - массив ячеек, соответствующий остальным входным параметрам.
 
 varargout - массив ячеек, соответствующий остальным выходным параметрам.
 
 Работать можно как с массивом ячеек, например varargin{1}.
 
 **Замечание!** Функция nargin - количество фактических входных параметров, а не число ячеек в varargin.
 
 **Подфункции**
 
 m-файл с программой-функцией может содержать описание нескольких функций.
 Имя первой функции должно совпадать с именем файла и только эта функция доступна извне, остальные функции будем называть подфункциями.
Каждая из них может быть вызвана либо основной функцией, либо любой подфункцией того же файла.
Порядок расположения подфункций внутри файла не влияет на область их видимости.

Программы-сценарии не могут содержать подфункций.

Описание подфункции заканчивается либо концом файла, либо перед началом описания следующей функции, начинающегося со слова function.

Каждая подфункция имеет свое локальное адресное пространство, все их переменные являются локальными. Область видимости каждой локальной переменной распространяется только на её подфункцию и не распространяется на другие.

**Вложенные функции**

Одни функции можно вкладывать внутрь других. Для определения вложенной функции нужно поместить её тело в тело другой функции в любом месте. Каждая из функций, описанных в файле в этом случае должна заканчиваться словом *end*.

Все команды от *function* до *end* - тело функции.

Количество и степень вложенности неограничены.

Область видимости переменных функции распространяется на все вложенные в нее функции, а также функции, вложенные во вложенные функции и т.д.

Эти функции используются, чтобы избежать переполнения стека, дублирования фактических параметров и избежать перечисления большого количества формальных параметров.

В файле могут быть либо основная функция и её подфункции, либо Основная функция и вложенные. Одновременно пользоваться этими механизмами нельзя.

**Частные функции**

Размещаются в папке с именем private. Доступны только из функций, расположенных в той же папке и в родительской папке.
Папку private бессмысленно указывать в путях доступа, эти папки не могут быть вложенными.
